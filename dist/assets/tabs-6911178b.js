import{o as d,A as F,T as K,t as U,N as C,u as D,a as g}from"./keyboard-16767ccf.js";import{s as J}from"./use-resolve-button-type-fb66ebe2.js";import{s as Q,f as W}from"./hidden-c8eb4dfd.js";import{z as O,A as P,G as N,q as c,D as M,E as j,v as V,H as X,F as Y,I as z,i as L}from"./index-bfbdc443.js";import{O as E,T as B,i as Z,P as A,N as h}from"./focus-management-2ab41560.js";import{t as _}from"./micro-task-89dcd6af.js";let ee=O({props:{onFocus:{type:Function,required:!0}},setup(t){let o=P(!0);return()=>o.value?N(W,{as:"button",type:"button",features:Q.Focusable,onFocus(v){v.preventDefault();let i,r=50;function l(){var u;if(r--<=0){i&&cancelAnimationFrame(i);return}if((u=t.onFocus)!=null&&u.call(t)){o.value=!1,cancelAnimationFrame(i);return}i=requestAnimationFrame(l)}i=requestAnimationFrame(l)}}):null}});var te=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(te||{}),ae=(t=>(t[t.Less=-1]="Less",t[t.Equal=0]="Equal",t[t.Greater=1]="Greater",t))(ae||{});let R=Symbol("TabsContext");function k(t){let o=L(R,null);if(o===null){let v=new Error(`<${t} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(v,k),v}return o}let q=Symbol("TabsSSRContext"),ie=O({name:"TabGroup",emits:{change:t=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(t,{slots:o,attrs:v,emit:i}){var r;let l=P((r=t.selectedIndex)!=null?r:t.defaultIndex),u=P([]),m=P([]),x=c(()=>t.selectedIndex!==null),f=c(()=>x.value?t.selectedIndex:l.value);function p(a){var e;let n=E(s.tabs.value,d),b=E(s.panels.value,d),S=n.filter(y=>{var I;return!((I=d(y))!=null&&I.hasAttribute("disabled"))});if(a<0||a>n.length-1){let y=D(l.value===null?0:Math.sign(a-l.value),{[-1]:()=>1,0:()=>D(Math.sign(a),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),I=D(y,{0:()=>n.indexOf(S[0]),1:()=>n.indexOf(S[S.length-1])});I!==-1&&(l.value=I),s.tabs.value=n,s.panels.value=b}else{let y=n.slice(0,a),I=[...n.slice(a),...y].find(H=>S.includes(H));if(!I)return;let G=(e=n.indexOf(I))!=null?e:s.selectedIndex.value;G===-1&&(G=s.selectedIndex.value),l.value=G,s.tabs.value=n,s.panels.value=b}}let s={selectedIndex:c(()=>{var a,e;return(e=(a=l.value)!=null?a:t.defaultIndex)!=null?e:null}),orientation:c(()=>t.vertical?"vertical":"horizontal"),activation:c(()=>t.manual?"manual":"auto"),tabs:u,panels:m,setSelectedIndex(a){f.value!==a&&i("change",a),x.value||p(a)},registerTab(a){var e;if(u.value.includes(a))return;let n=u.value[l.value];u.value.push(a),u.value=E(u.value,d);let b=(e=u.value.indexOf(n))!=null?e:l.value;b!==-1&&(l.value=b)},unregisterTab(a){let e=u.value.indexOf(a);e!==-1&&u.value.splice(e,1)},registerPanel(a){m.value.includes(a)||(m.value.push(a),m.value=E(m.value,d))},unregisterPanel(a){let e=m.value.indexOf(a);e!==-1&&m.value.splice(e,1)}};M(R,s);let T=P({tabs:[],panels:[]}),w=P(!1);j(()=>{w.value=!0}),M(q,c(()=>w.value?null:T.value));let $=c(()=>t.selectedIndex);return j(()=>{V([$],()=>{var a;return p((a=t.selectedIndex)!=null?a:t.defaultIndex)},{immediate:!0})}),X(()=>{if(!x.value||f.value==null||s.tabs.value.length<=0)return;let a=E(s.tabs.value,d);a.some((e,n)=>d(s.tabs.value[n])!==d(e))&&s.setSelectedIndex(a.findIndex(e=>d(e)===d(s.tabs.value[f.value])))}),()=>{let a={selectedIndex:l.value};return N(Y,[u.value.length<=0&&N(ee,{onFocus:()=>{for(let e of u.value){let n=d(e);if((n==null?void 0:n.tabIndex)===0)return n.focus(),!0}return!1}}),F({theirProps:{...v,...K(t,["selectedIndex","defaultIndex","manual","vertical","onChange"])},ourProps:{},slot:a,slots:o,attrs:v,name:"TabGroup"})])}}}),de=O({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(t,{attrs:o,slots:v}){let i=k("TabList");return()=>{let r={selectedIndex:i.selectedIndex.value},l={role:"tablist","aria-orientation":i.orientation.value};return F({ourProps:l,theirProps:t,slot:r,attrs:o,slots:v,name:"TabList"})}}}),ve=O({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-tabs-tab-${U()}`}},setup(t,{attrs:o,slots:v,expose:i}){let r=k("Tab"),l=P(null);i({el:l,$el:l}),j(()=>r.registerTab(l)),z(()=>r.unregisterTab(l));let u=L(q),m=c(()=>{if(u.value){let e=u.value.tabs.indexOf(t.id);return e===-1?u.value.tabs.push(t.id)-1:e}return-1}),x=c(()=>{let e=r.tabs.value.indexOf(l);return e===-1?m.value:e}),f=c(()=>x.value===r.selectedIndex.value);function p(e){var n;let b=e();if(b===B.Success&&r.activation.value==="auto"){let S=(n=Z(l))==null?void 0:n.activeElement,y=r.tabs.value.findIndex(I=>d(I)===S);y!==-1&&r.setSelectedIndex(y)}return b}function s(e){let n=r.tabs.value.map(b=>d(b)).filter(Boolean);if(e.key===g.Space||e.key===g.Enter){e.preventDefault(),e.stopPropagation(),r.setSelectedIndex(x.value);return}switch(e.key){case g.Home:case g.PageUp:return e.preventDefault(),e.stopPropagation(),p(()=>A(n,h.First));case g.End:case g.PageDown:return e.preventDefault(),e.stopPropagation(),p(()=>A(n,h.Last))}if(p(()=>D(r.orientation.value,{vertical(){return e.key===g.ArrowUp?A(n,h.Previous|h.WrapAround):e.key===g.ArrowDown?A(n,h.Next|h.WrapAround):B.Error},horizontal(){return e.key===g.ArrowLeft?A(n,h.Previous|h.WrapAround):e.key===g.ArrowRight?A(n,h.Next|h.WrapAround):B.Error}}))===B.Success)return e.preventDefault()}let T=P(!1);function w(){var e;T.value||(T.value=!0,!t.disabled&&((e=d(l))==null||e.focus({preventScroll:!0}),r.setSelectedIndex(x.value),_(()=>{T.value=!1})))}function $(e){e.preventDefault()}let a=J(c(()=>({as:t.as,type:o.type})),l);return()=>{var e;let n={selected:f.value},{id:b,...S}=t,y={ref:l,onKeydown:s,onMousedown:$,onClick:w,id:b,role:"tab",type:a.value,"aria-controls":(e=d(r.panels.value[x.value]))==null?void 0:e.id,"aria-selected":f.value,tabIndex:f.value?0:-1,disabled:t.disabled?!0:void 0};return F({ourProps:y,theirProps:S,slot:n,attrs:o,slots:v,name:"Tab"})}}}),pe=O({name:"TabPanels",props:{as:{type:[Object,String],default:"div"}},setup(t,{slots:o,attrs:v}){let i=k("TabPanels");return()=>{let r={selectedIndex:i.selectedIndex.value};return F({theirProps:t,ourProps:{},slot:r,attrs:v,slots:o,name:"TabPanels"})}}}),ce=O({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-tabs-panel-${U()}`},tabIndex:{type:Number,default:0}},setup(t,{attrs:o,slots:v,expose:i}){let r=k("TabPanel"),l=P(null);i({el:l,$el:l}),j(()=>r.registerPanel(l)),z(()=>r.unregisterPanel(l));let u=L(q),m=c(()=>{if(u.value){let p=u.value.panels.indexOf(t.id);return p===-1?u.value.panels.push(t.id)-1:p}return-1}),x=c(()=>{let p=r.panels.value.indexOf(l);return p===-1?m.value:p}),f=c(()=>x.value===r.selectedIndex.value);return()=>{var p;let s={selected:f.value},{id:T,tabIndex:w,...$}=t,a={ref:l,id:T,role:"tabpanel","aria-labelledby":(p=d(r.tabs.value[x.value]))==null?void 0:p.id,tabIndex:f.value?w:-1};return!f.value&&t.unmount&&!t.static?N(W,{as:"span","aria-hidden":!0,...a}):F({ourProps:a,theirProps:$,slot:s,attrs:o,slots:v,features:C.Static|C.RenderStrategy,visible:f.value,name:"TabPanel"})}}});export{pe as I,ie as m,de as p,ve as x,ce as y};
